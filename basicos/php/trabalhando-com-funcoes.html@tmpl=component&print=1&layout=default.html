<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="pt-br" lang="pt-br" dir="ltr">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <base href="" />
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta name="author" content="Ribamar FS" />
	<meta name="robots" content="noindex, nofollow" />
	<meta name="description" content="Servidores linux, Programação web (PHP, Joomla, CakePHP, Laravel), Programação Mobile (Phaser, PhoneGap, Monaca, Unity, etc) entre outros." />
	<meta name="generator" content="Joomla! - Open Source Content Management" />
	<title>Trabalhando com Funções - RibaFS Portal</title>
	<link href="http://ribafs.org/portal/basicos/php/trabalhando-com-funcoes.html?tmpl=component&amp;print=1&amp;layout=default" rel="canonical" />
	<link href="../../templates/shaper_helix3/images/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon" />
	<link href="../../favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon" />
	<link href="http://backup/portal/media/plg_content_prismsyntaxhighlighter/css/prism-okaidia.css" rel="stylesheet" type="text/css" />
	<link href="http://backup/portal/media/plg_content_prismsyntaxhighlighter/css/prism-linenumbers.css" rel="stylesheet" type="text/css" />
	<script src="http://backup/portal/media/plg_content_prismsyntaxhighlighter/js/prism-tinymce.js" type="text/javascript"></script>
	<script src="../../media/jui/js/jquery.min.js@d40d24664a167cb951f5efaf872c4327" type="text/javascript"></script>
	<script src="../../media/jui/js/jquery-noconflict.js@d40d24664a167cb951f5efaf872c4327" type="text/javascript"></script>
	<script src="../../media/jui/js/jquery-migrate.min.js@d40d24664a167cb951f5efaf872c4327" type="text/javascript"></script>
	<script src="http://backup/portal/media/system/js/caption.js?d40d24664a167cb951f5efaf872c4327" type="text/javascript"></script>
	<script type="text/javascript">
jQuery(window).on('load',  function() {
				new JCaption('img.caption');
			});
	</script>
	<meta property="og:url" content="http://backup/portal/basicos/php/trabalhando-com-funcoes.html" />
	<meta property="og:type" content="article" />
	<meta property="og:title" content="Trabalhando com Funções" />
	<meta property="og:description" content="Trabalhando com Funções em PHP <?php echo "<pre> Funções são blocos de código, conjuntos de instruções, que ficam quietos, sem vida, até que sejam chamadas..." />

   	<link rel="stylesheet" href="../../media/jui/css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../../templates/shaper_helix3/css/frontend-edit.css" type="text/css" />
    <link rel="stylesheet" href="../../templates/shaper_helix3/css/template.css" type="text/css" />
</head>
<body class="contentpane">
	<div id="system-message-container">
	</div>

	

<article class="item item-page" itemscope itemtype="http://schema.org/Article">
	<meta itemprop="inLanguage" content="pt-BR" />
	
	

	<div class="entry-header">
		<span class="post-format"><i class="fa fa-thumb-tack"></i></span>
		
					<h2 itemprop="name">
									Trabalhando com Funções							</h2>
												</div>

						<div id="pop-print" class="btn hidden-print">
				<a href="trabalhando-com-funcoes.html#" onclick="window.print();return false;">			<span class="icon-print" aria-hidden="true"></span>
		Imprimir	</a>			</div>
				
	
	
				
	
			<div itemprop="articleBody">
		<p><strong>Trabalhando com Funções em PHP</strong></p>
<pre class="language-php"><code>&lt;?php

echo "&lt;pre&gt;
Funções são blocos de código, conjuntos de instruções, que ficam quietos,
sem vida, até que sejam chamadas em algum lugar do código.
Funções reduzem o trabalho de digitação, o tamanho dos scripts em geral,
os erros, reaproveitando código, facilitando e organizando o trabalho de
desenvolvimento.
&lt;/pre&gt;";

echo "Exemplos de funções definidas pelo usuário&lt;br&gt;.";
function quadrado($numero)
{
    print $numero * $numero;
}

//Executando:
quadrado(6); // Saída: 36

echo " Variáveis globais&lt;br&gt;";
$var1 = 5;

function testeGlobal1()
{
    $var1 = 1;
    print "&lt;br&gt;Valor de \$var1: $var1";
}

echo testeGlobal1();
echo "Variável externa acessível na função&lt;br&gt;";

$var2 = 10;
function testeGlobal2()
{
    global $var2;
    print "&lt;br&gt;Valor de \$var2 $var2";
}

echo testeGlobal2();

$var5 = 15;

function testeGlobal5()
{
    $var5 = 5;
    print "&lt;br&gt;&lt;br&gt;A variável global vale $GLOBALS[var5], ";
    print "Já a variável local vale $var5&lt;br&gt;&lt;br&gt;";
}

testeGlobal5();

function cliente($codigo, $idade = 18)
{
    print "Código = $codigo, Idade = $idade";
}

cliente(1);  //Exibirá: Código = 1, Idade = 18

function cubo($num)
{
    return ($num * $num * $num);
}

$var1 = 2 * cubo(5);
echo "&lt;br&gt;" . $var1;

echo "Variáveis estáticas&lt;br&gt;";

function contador()
{
    static $x = 0;
    return $x++;
}

echo "&lt;br&gt;";
echo contador();
echo contador();
echo contador();
//A saída será: 012

function contador2()
{
    $x = 0;
    return $x++;
}

echo "&lt;br&gt;";
echo contador2();
echo contador2();
echo contador2();

//A saída será: 000.

function staticfunction()
{
    static $count = 0;
    $count++;
    if ($count == 1) {
        echo "A Função foi executada $count vez&lt;br&gt;";
    } else {
        echo "A Função foi executada $count vezes&lt;br&gt;";
    }
}


for ($i = 0; $i &lt; 5; $i++) {
    staticfunction();
}

function Teste1()
{
    static $a = 0;
    echo $a;
    $a++;
}

for ($x = 0; $x &lt;= 10; $x++) {
    echo Teste1() . " ";
}

echo "&lt;br&gt;";

echo "Recursiva&lt;br&gt;";

function Teste()
{
    static $count = 0;

    $count++;
    echo $count . " ";
    if ($count &lt; 10) {
        Teste();
    }
    $count--;
}

Teste();

echo "Declarando variáveis static&lt;br&gt;";
function foo()
{
    static $int = 0;          // correro
    // static $int = 1+2;        // errado (é uma expressão)
    // static $int = sqrt(121);  // errado  (é uma expressão também)

    $int++;
    echo $int;
}


function aumentoSalario($sal, $perc = 5)
{
    $salario = $sal * $perc / 100;
    echo $salario;
}
echo "&lt;br&gt;Aumento: " . aumentoSalario(1956);

function redirecionar($url)
{
    header("Location: $url");
}
echo "&lt;br&gt;";
redirecionar("http://ribafs.phpnet.us/");
echo "&lt;br&gt;";

echo "Retornar mais de um valor de uma função: usa-se arrays e list()
array() retorna e list() exibe &lt;br&gt;";

//Exemplo:

function recebe_hoje()
{
    $data_abreviada = date("d/m/Y");
    $data_extensa = date("l, d F \d\e Y");

    return array($data_abreviada, $data_extensa);
}

list($data_abreviada, $data_extensa) = recebe_hoje();
print $data_extensa;
echo "&lt;br&gt;";
print $data_abreviada;


echo "Declaração dinâmica de função:&lt;br&gt;";

if ($f == 1) {
    function f1()
    {
        echo "funcao1";
    }
} else {
    function f2()
    {
        echo "funcao2";
    }
}

echo "Retornando o número de argumentos de uma função:&lt;br&gt;";

function ret_args_funcao()
{
    $numargs = func_num_args();
    echo "Número de argumentos: $numargs&lt;br&gt;\n";
    if ($numargs &gt;= 2) {
        echo "Segundo argumento vale : " . func_get_arg(1) . "&lt;br&gt;\n";
    }
    $arg_list = func_get_args();
    for ($i = 0; $i &lt; $numargs; $i++) {
        echo "Argumento $i vale: " . $arg_list[$i] . "&lt;br&gt;\n";
    }
}

ret_args_funcao(1, 2, 3);

echo "&lt;pre&gt;
Passando Argumentos através de Funções

O default é 'por valor', que passa uma cópia do valor da variável.

Também podemos passar 'por referência', onde se passa o endereço da própria variável. Quando atribuímos uma variável a utra passando como referência, não fazemos cópia alguma, mas sim passamos o endereço da variável original, portanto ualquer alteração nesta referência refletirá na variável original.

ByRef é mais eficiente em termos de memória ao lidar com variáveis e arrays grandes e também permite alterar o valor da variável original, o que não acontece com o ByVal, mas a vantagem de desempnho somente é percebida em grandes arrays em grandes loops.

Para maior segurança setar:

allow_call_time_pass_reference no php.ini

Impede a passagem de valores por referência nas chamadas, mas permite somente na definição das funções.

$var1 = &amp; $var2;
Agora ambas apontam para o mesmo endereço e valor.

Reter valor de variáveis entre chamadas (static)
(Guarda o valor da última chamada até o final da execução do script, tantas vezes quantas a função for chamada).
&lt;/pre&gt;";


//Exemplo:

$valor = 4;
$ref = &amp;$valor;

$ref = 3;

$valor = 4;
$ref = &amp;$valor; // Aqui tornamos ambas as variáveis com o mesmo endereço
// O que alterarmos em $ref alteramos em $valor

$ref = 3;       // Com isso também alteramos $valor para 3, veja abaixo.
echo $valor . "&lt;br&gt;";

$valor = 0;       // Com isso também alteramos $ref para 0, veja abaixo.

echo $ref;


echo "Por Valor&lt;br&gt;";
function val_subtracao($num1, $num2)
{
    if ($num1 &lt; $num2) {
        die("Números negativos");
    } else {
        $return_result = 0;
        while ($num1 &gt; $num2) {
            $num1 = $num1 - 1;
            $return_result = $return_result + 1;
        }
    }
    return ($return_result);
}

$primeiro_op = 493;
$segundo_op = 355;
$resultado1 = val_subtracao($primeiro_op, $segundo_op);
print("Resultado1 é $resultado1&lt;br&gt;");
$resultado2 = val_subtracao($primeiro_op, $segundo_op);
print("Resultado2 é $resultado2&lt;br&gt;");

echo "Por Referência&lt;br&gt;";
function subtracao_ref(&amp;$num1, &amp;$num2)
{
    if ($num1 &lt; $num2) {
        die("Números negativos");
    } else {
        $return_result = 0;
        while ($num1 &gt; $num2) {
            $num1 = $num1 - 1;
            $return_result = $return_result + 1;
        }
    }
    return ($return_result);
}

$primeiro_op = 493;
$segundo_op = 355;
$resultado1 = subtracao_ref($primeiro_op, $segundo_op);
print("&lt;br&gt;&lt;br&gt;Resultado1 é $resultado1&lt;br&gt;");
$resultado2 = subtracao_ref($primeiro_op, $segundo_op);
print("Resultado2 é $resultado2&lt;br&gt;");

echo "Agora, se se nós executarmos exatamente a mesma chamada da subtração como fizemos a primeira vez, receberemos a aída: resultado1 é 138 e resultado2 é 0";


/*
Sugestão de chamada de função:

if (nome_funcao($argumento){
	....
	....
}else{
	....
}

*/
?&gt;

&lt;?php
// Retorna o tipo e o valor de variável
function ss_as_string(&amp;$thing, $column = 0)
{
    if (is_object($thing)) {
        return ss_object_as_string($thing, $column);
    } elseif (is_array($thing)) {
        return ss_array_as_string($thing, $column);
    } elseif (is_double($thing)) {
        return "Double(" . $thing . ")";
    } elseif (is_long($thing)) {
        return "Long(" . $thing . ")";
    } elseif (is_string($thing)) {
        return "String(" . $thing . ")";
    } else {
        return "Unknown(" . $thing . ")";
    }
}

// Retorna o tipo e o valor de array
function ss_array_as_string(&amp;$array, $column = 0)
{
    $str = "Array(&lt;BR&gt;\n";
    while (list($var, $val) = each($array)) {
        for ($i = 0; $i &lt; $column + 1; $i++) {
            $str .= "&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;";
        }
        $str .= $var . ' ==&gt; ';
        $str .= ss_as_string($val, $column + 1) . "&lt;BR&gt;\n";
    }
    for ($i = 0; $i &lt; $column; $i++) {
        $str .= "&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;";
    }
    return $str . ')';
}

// Retorna o tipo e o valor de objeto
function ss_object_as_string(&amp;$object, $column = 0)
{
    if (empty($object-&gt;classname)) {
        return "$object";
    } else {
        $str = $object-&gt;classname . "(&lt;BR&gt;\n";
        while (list(, $var) = each($object-&gt;persistent_slots)) {
            for ($i = 0; $i &lt; $column; $i++) {
                $str .= "&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;";
            }
            global $$var;
            $str .= $var . ' ==&gt; ';
            $str .= ss_as_string($$var, column + 1) . "&lt;BR&gt;\n";
        }
        for ($i = 0; $i &lt; $column; $i++) {
            $str .= "&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;";
        }
        return $str . ')';
    }
}

$var = "Riba";
echo ss_as_string($var);
//echo ss_as_string($GLOBALS);


// Otimização do tempo de execução

function ss_timing_start($name = 'default')
{
    global $ss_timing_start_times;
    $ss_timing_start_times[$name] = explode(' ', microtime());
}

function ss_timing_stop($name = 'default')
{
    global $ss_timing_stop_times;
    $ss_timing_stop_times[$name] = explode(' ', microtime());
}

function ss_timing_current($name = 'default')
{
    global $ss_timing_start_times, $ss_timing_stop_times;
    if (!isset($ss_timing_start_times[$name])) {
        return 0;
    }
    if (!isset($ss_timing_stop_times[$name])) {
        $stop_time = explode(' ', microtime());
    } else {
        $stop_time = $ss_timing_stop_times[$name];
    }
    // do the big numbers first so the small ones aren't lost
    $current = $stop_time[1] - $ss_timing_start_times[$name][1];
    $current += $stop_time[0] - $ss_timing_start_times[$name][0];
    return $current;
}

?&gt;</code></pre> 	</div>

	
	
				
	
	
	
</article>

</body>
</html>
