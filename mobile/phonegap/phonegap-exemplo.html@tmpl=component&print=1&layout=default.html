<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="pt-br" lang="pt-br" dir="ltr">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <base href="" />
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta name="author" content="Ribamar FS" />
	<meta name="robots" content="noindex, nofollow" />
	<meta name="description" content="Servidores linux, Programação web (PHP, Joomla, CakePHP, Laravel), Programação Mobile (Phaser, PhoneGap, Monaca, Unity, etc) entre outros." />
	<meta name="generator" content="Joomla! - Open Source Content Management" />
	<title>PhoneGap - Exemplos - RibaFS Portal</title>
	<link href="http://ribafs.org/portal/mobile/phonegap/phonegap-exemplo.html?tmpl=component&amp;print=1&amp;layout=default" rel="canonical" />
	<link href="../../templates/shaper_helix3/images/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon" />
	<link href="../../favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon" />
	<link href="http://backup/portal/media/plg_content_prismsyntaxhighlighter/css/prism-okaidia.css" rel="stylesheet" type="text/css" />
	<link href="http://backup/portal/media/plg_content_prismsyntaxhighlighter/css/prism-linenumbers.css" rel="stylesheet" type="text/css" />
	<script src="http://backup/portal/media/plg_content_prismsyntaxhighlighter/js/prism-tinymce.js" type="text/javascript"></script>
	<script src="../../media/jui/js/jquery.min.js@d40d24664a167cb951f5efaf872c4327" type="text/javascript"></script>
	<script src="../../media/jui/js/jquery-noconflict.js@d40d24664a167cb951f5efaf872c4327" type="text/javascript"></script>
	<script src="../../media/jui/js/jquery-migrate.min.js@d40d24664a167cb951f5efaf872c4327" type="text/javascript"></script>
	<script src="http://backup/portal/media/system/js/caption.js?d40d24664a167cb951f5efaf872c4327" type="text/javascript"></script>
	<script type="text/javascript">
jQuery(window).on('load',  function() {
				new JCaption('img.caption');
			});
	</script>
	<meta property="og:url" content="http://backup/portal/mobile/phonegap/phonegap-exemplo.html" />
	<meta property="og:type" content="article" />
	<meta property="og:title" content="PhoneGap - Exemplos" />
	<meta property="og:description" content="PhoheGap - Exemplo Simples Adaptado das vídeo aulas do Youtube - Cadastro de Clientes com PhoneGap https://www.youtube.com/watch?v=pxAAIbU3X9c Simplifiquei..." />

   	<link rel="stylesheet" href="../../media/jui/css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../../templates/shaper_helix3/css/frontend-edit.css" type="text/css" />
    <link rel="stylesheet" href="../../templates/shaper_helix3/css/template.css" type="text/css" />
</head>
<body class="contentpane">
	<div id="system-message-container">
	</div>

	

<article class="item item-page" itemscope itemtype="http://schema.org/Article">
	<meta itemprop="inLanguage" content="pt-BR" />
	
	

	<div class="entry-header">
		<span class="post-format"><i class="fa fa-thumb-tack"></i></span>
		
					<h2 itemprop="name">
									PhoneGap - Exemplos							</h2>
												</div>

						<div id="pop-print" class="btn hidden-print">
				<a href="phonegap-exemplo.html#" onclick="window.print();return false;">			<span class="icon-print" aria-hidden="true"></span>
		Imprimir	</a>			</div>
				
	
	
				
	
			<div itemprop="articleBody">
		<p><strong>PhoheGap - Exemplo Simples</strong></p>
<p>Adaptado das vídeo aulas do Youtube - Cadastro de Clientes com PhoneGap<br /><a href="https://www.youtube.com/watch?v=pxAAIbU3X9c">https://www.youtube.com/watch?v=pxAAIbU3X9c</a></p>
<p>Simplifiquei e criei apenas uma agenda com id e nome <br /> <br /><strong>Criar app</strong> <br /> <br />phonegap create agenda org.ribafs.agenda Agenda</p>
<p>O Phonegap criará uma aplicação básica, tipo Hello World, que precisamos modificar para nos atender.</p>
<p><br /><strong>cd agenda</strong> <br />Editar o www/index.html <br /> <br />Remover tudo entre &lt;body&gt; e &lt;/body&gt; <br /> <br />&lt;head&gt; <br />&lt;link rel="stylesheet" href="/portal/js/jquery.mobile-1.4.5.min.css" /&gt; <br />&lt;/head&gt; <br />&lt;body&gt; <br /> &lt;form id="formCliente"&gt; <br /> ID &lt;input type="text" name="id"&gt;&lt;br&gt; <br /> Nome &lt;input type="text" name="nome"&gt;&lt;br&gt; <br /> &lt;button onClick="salvar();" type="submit"&gt;Enviar&lt;/button&gt; <br /> &lt;/form&gt; <br /> <br />&lt;script src="/portal/js/jquery-1.11.1.min.js"&gt;&lt;/script&gt; <br />&lt;script src="/portal/js/jquery.mobile-1.4.5.min.js"&gt;&lt;/script&gt; <br /> <br />&lt;/body&gt; <br /> <br /><strong>Efetuar deploy para o build na nuvem</strong> <br />cd app <br />phonegap remote run android <br />Ao final ele gera um QRCode e exibe na tela. <br /> <br />Criar banco<br />Criar o banco agenda com uma tabela contatos e os campos id e nome apenas. <br /> <br /><strong>Editar o www/index.html e adicionar ao final:</strong> <br /> </p>
<pre class="language-markup"><code>&lt;!DOCTYPE html&gt;

&lt;html&gt;
&lt;head&gt;
&lt;meta charset="utf-8" /&gt;
&lt;meta name="format-detection" content="telephone=no" /&gt;
&lt;meta name="msapplication-tap-highlight" content="no" /&gt;
&lt;!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 --&gt;
&lt;meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" /&gt;
&lt;link rel="stylesheet" href="/portal/css/jquery.mobile-1.4.5.min.css" /&gt;
&lt;style&gt;
.margem{
margin: 10px;
}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;div data-role="page"&gt;
&lt;div data-role="header"&gt;
&lt;h1&gt;Agenda de Contatos&lt;/h1&gt;
&lt;/div&gt;&lt;!-- /header --&gt;

&lt;form id="formContatos"&gt;
&amp;nbsp;ID&lt;span&gt; &lt;input type="text" name="id"&gt;
&amp;nbsp;Nome &lt;input type="text" name="nome"&gt;
&lt;button onClick="salvar();" type="submit"&gt;Enviar&lt;/button&gt;
&lt;/form&gt;

&lt;script src="/portal/js/jquery-1.11.1.min.js"&gt;&lt;/script&gt;
&lt;script src="/portal/js/jquery.mobile-1.4.5.min.js"&gt;&lt;/script&gt;

&lt;script type="text/javascript" src="/portal/cordova.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="/portal/js/index.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt;
app.initialize();
&lt;/script&gt;
&lt;/div&gt; </code></pre>
<p><br /><br /><strong>AJAX para pegar informações do servidor externo</strong> <br /> </p>
<pre class="language-markup"><code>&lt;script&gt;
function salvar(){
var formula = $('formContatos').serialize(); // Trazer todos os campos do form para a variável formula
$.ajax({
type: 'POST',
data: formula,
url: 'http://localhost/agenda/cadastro.php', // Mudar depois para a URL do app externo
success: function(data){
if(data == '' || data == 0){
alert('Ocorreu erro no banco!');
window.location = ""; // para refresh
}
if(data == 1){
alert('Registro salvo com sucesso!');
window.location = "";
}
}
});
}
&lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt; </code></pre>
<p><br /> <br />Por padrão um app do Phonegap não funciona em servidor externno, apenas localmente. <br />Para que funcione em servidor externo precisamos configurar no config.xml.</p>
<p><strong>Criando a aplicação externa em PHP com MySQL</strong><br /> <br />Criar os arquivos: <br /> <br />conexao.php <br />cadastro.php <br />tabela.php <br /> <br /><strong>conexao.php</strong> <br /> </p>
<pre class="language-php"><code>&lt;?php
$dsn = 'mysql:host=localhost;dbname=agenda';
$user = 'root';
$pass = 'mysql';

$conexao = new PDO($dsn, $user, $pass);

$stml = $conexao-&gt;query("SELECT * from contatos ORDER BY id DESC");
?&gt; </code></pre>
<p><br /> <br /><strong>cadastro.php</strong> <br /> </p>
<pre class="language-php"><code>&lt;?php
include_once('./conexao.php');

$nome = mysql_real_escape_string($_REQUEST['nome']);

$sql = "INSERT INTO contatos (nome) VALUES ('$nome')";
$res = mysql_query($sql);

if($res == TRUE){
$cadastro = 1;
}else{
$cadastro = 0;
}

echo (json_encode($cadastro));

tabela.php
&lt;?php
include_once('./conexao.php');
?&gt;
&lt;table align="center" border="1"&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ID&lt;/th&gt;&lt;th&gt;Nome&lt;/th&gt;
&lt;/th&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;?php foreach($stml as $valor){ ?&gt;
&lt;tr&gt;
&lt;td&gt;&lt;?=$valor['id']?&gt;&lt;/td&gt;&lt;td&gt;&lt;?=$valor['nome']?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;?php } ?&gt;
&lt;/tbody&gt;
&lt;/table&gt; </code></pre>
<p><br /> <br />Aplicação acessando aplicativo PHP+MySQL externo <br /> <br /><strong>Mudar a url do ajax na index.html</strong> <br />Criar banco e arquivos no servidor externo (conexao, cadastro e tabela). <br />Mudar os dados do banco de dados, de acordo com o server exteerno. <br /> <br /><strong>Mudar no config.xml:</strong> <br /> <br />&lt;preference name="permissions" value="true"/&gt; <br /> <br />&lt;access origin="http://URLservidorexterno.org"/&gt;</p>
<p><strong>Jogo Breakout com Phaser</strong></p>
<p>Fontes - <a title="breakout_phonegap.zip" href="../../down/mobile/phonegap/breakout_phonegap.zip">breakout_phonegap.zip</a></p>
<p>Android - <a title="Breakout-release.apk" href="http://backup/portal/down/mobile/phonegap/Breakout-release.apk">Breakout-release.apk</a></p>
<p>Nova versão - <a title="phonegap.apk" href="http://backup/portal/down/mobile/phonegap/breakout.apk">phonegap.apk</a></p>
<p> </p> 	</div>

	
	
				
	
	
	
</article>

</body>
</html>
