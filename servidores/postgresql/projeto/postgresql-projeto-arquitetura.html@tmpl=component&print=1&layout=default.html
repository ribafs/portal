<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="pt-br" lang="pt-br" dir="ltr">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <base href="" />
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta name="author" content="Ribamar FS" />
	<meta name="robots" content="noindex, nofollow" />
	<meta name="description" content="Servidores linux, Programação web (PHP, Joomla, CakePHP, Laravel), Programação Mobile (Phaser, PhoneGap, Monaca, Unity, etc) entre outros." />
	<meta name="generator" content="Joomla! - Open Source Content Management" />
	<title>PostgreSQL - Projeto/Arquitetura - RibaFS Portal</title>
	<link href="http://ribafs.org/portal/servidores/postgresql/projeto/postgresql-projeto-arquitetura.html?tmpl=component&amp;print=1&amp;layout=default" rel="canonical" />
	<link href="../../../templates/shaper_helix3/images/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon" />
	<link href="../../../favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon" />
	<script src="../../../media/jui/js/jquery.min.js@d40d24664a167cb951f5efaf872c4327" type="text/javascript"></script>
	<script src="../../../media/jui/js/jquery-noconflict.js@d40d24664a167cb951f5efaf872c4327" type="text/javascript"></script>
	<script src="../../../media/jui/js/jquery-migrate.min.js@d40d24664a167cb951f5efaf872c4327" type="text/javascript"></script>
	<script src="http://backup/portal/media/system/js/caption.js?d40d24664a167cb951f5efaf872c4327" type="text/javascript"></script>
	<script type="text/javascript">
jQuery(window).on('load',  function() {
				new JCaption('img.caption');
			});
	</script>
	<meta property="og:url" content="http://backup/portal/servidores/postgresql/projeto/postgresql-projeto-arquitetura.html" />
	<meta property="og:type" content="article" />
	<meta property="og:title" content="PostgreSQL - Projeto/Arquitetura" />
	<meta property="og:description" content="PostgreSQL - Projeto/Arquitetura 1) Conceitos 2) Modelo Entidade Relacionamento 3) Modelo Objeto Relacional 4) Normalização 5) Integridade Referencial 6) P..." />

   	<link rel="stylesheet" href="../../../media/jui/css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../../../templates/shaper_helix3/css/frontend-edit.css" type="text/css" />
    <link rel="stylesheet" href="../../../templates/shaper_helix3/css/template.css" type="text/css" />
</head>
<body class="contentpane">
	<div id="system-message-container">
	</div>

	

<article class="item item-page" itemscope itemtype="http://schema.org/Article">
	<meta itemprop="inLanguage" content="pt-BR" />
	
	

	<div class="entry-header">
		<span class="post-format"><i class="fa fa-thumb-tack"></i></span>
		
					<h2 itemprop="name">
									PostgreSQL - Projeto/Arquitetura							</h2>
												</div>

						<div id="pop-print" class="btn hidden-print">
				<a href="postgresql-projeto-arquitetura.html#" onclick="window.print();return false;">			<span class="icon-print" aria-hidden="true"></span>
		Imprimir	</a>			</div>
				
	
	
				
	
			<div itemprop="articleBody">
		<h4 style="text-align: justify;">PostgreSQL - Projeto/Arquitetura</h4>

<p style="text-align: justify;"><br />1) Conceitos<br />2) Modelo Entidade Relacionamento<br />3) Modelo Objeto Relacional<br />4) Normalização <br />5) Integridade Referencial<br />6) Planejamento e Otimização<br /><br />Iniciar com os conceitos básicos: dado, informação e conhecimento.<br /><br /><strong>Dado</strong> – representação simbólica, quantificada ou quantificável. Um texto, um número e uma foto são exemplos de dados. O computador somente trabalha com dados, nada de informações e muito menos de conhecimento.<br /><br /><strong>Informação</strong> – são mensagens sob forma de dados, que são recebidas e compreendidas. Caso não seja compreendida elas são apenas dados.<br /><br />Portanto dados são entes meramente sintáticos (estruturas). <br />As informações contém semântica, ou seja, contém um significado próprio. A informação é algo objetivo e subjetivo.<br /><br /><strong>Conhecimento</strong> – enquanto a informação é um conhecimento teórico, o conhecimento é algo prático.<br /><br />Só podemos transmitir dados, jamais informações e conhecimento. Os dados podem ser transmitidos, ao serem interpretados tornam-se informações, mas somente ao serem experimentados transformam-se em conhecimento.<br /><br /><strong>Fonte</strong>: Livro Bancos de Dados de Valdemar W. Setzer e Flávio Soares Corrêa da Silva.<br /><br /><br /><strong>1) Conceitos</strong><br /><br /><strong>Modelo Relacional</strong> - A maioria dos SGBDs existentes são baseados no modelo relacional.<br /><strong>SGBD</strong> - É um sistema de computador cuja função principal é a de manter bancos de dados e fornecer informações os mesmos quando solicitados.<br /><strong>DBA</strong> - DataBase Administrator (Administrador de Bancos de Dados), é quem trabalha criando os bancos de dados, implementando controle técnico e administrativo dos dados e implementando a segurança.<br /><strong>Entidades</strong> - Ou classes, podem ser concretas ou abstratas e representam pessoas, lugares ou coisas (objetos). Entidade no projeto representa Tabela na implementação.<br /><strong>Atributos</strong> - Ou propriedades. As entidades são compostas por atributos. Atributos no projeto correspondem a campos na implementação.<br /><strong>Relacionamentos</strong> - Associação entre as entidades.<br /><strong>Projeto</strong> - Modelo, lógico e físico.<br /><strong>Implementação</strong> - Criação e administração, físico.<br /><strong>Modelo de dados</strong> - É uma definição lógica e abstrata de um banco de dados.<br /><strong>Implementação</strong> - É a aplicação física (prática) do modelo de dados em um computador.<br /><strong>Aplicação cliente</strong> - Também chamada de front-end do banco de dados. Roda sobre um SGBD.<br /><strong>DDL</strong> - Conjunto de instruções para definir ou declarar objetos do banco de dados.<br /><strong>DML</strong> - Conjunto de instruções para manipular ou processar os objetos do banco de dados.<br /><strong>Dicionário de dados</strong> - É um conjunto de tabelas do banco de dados que contém informações sobre os objetos do banco, dados sobre dados (metadados).<br /><strong>Bancos distribuídos</strong> - Banco que é logicamente centralizado e fisicamente distribuído. A distribuição pode ser em vários sites. Os sites podem estar em vários SO diferentes, redes e máquinas diferentes.<br /><strong>Projeto lógico</strong> - É a fase de identificação das entidades de interesse para a empresa e de identificação das informações a serem armazenadas nas entidades. Deve acontecer antes do projeto físico (implementação).<br /><strong>CAST</strong> - Valores podem ser convertidos de um tipo para outro através do operador CAST ou através de coerção implícita. O PostgreSQL em sua versão 8.3 está passando a usar bem mais as coerções explícitas.<br /><strong>Projeto de banco</strong> - Projetar bancos tem mais de arte que de ciência. Um projeto adequado previne perca da integridade dos dados e permite consultas adequadas e eficientes. Qualquer projeto requer uma noção exata do que o banco deverá armazenar. Temos que colher o máximo de informações junto ao cliente e ir além percebendo necessidades que ele próprio não percebe.<br /><strong>Casos de uso</strong> - São textos com formatação livre, que descrevem operações do ponto de vista de um eventual usuário interagindo com o sistema. Uma boa forma de capturar as finalidades do banco é construindo casos de uso.<br /><strong>Modelagem dos dados</strong> - Exige que reflitamos cuidadosamente sobre os diferentes conjuntos ou classes (entidades) necessárias para solucionar o problema.<br /><strong>Dados</strong> - Representação simbólica (abstrata).<br /><strong>Informação</strong> - Dados com significado. Mensagem compreendida é informação, caso contrário são apenas dados. Computadores armazenam apenas dados e não informação.<br /><strong>MER</strong> - É um modelo que não pode ser representado num computador, existindo apenas na mente de uma pessoa. Pode ser representado como texto ou em forma de diagrama gráfico (DER).<br /><strong>IDs</strong> - Caso um registro tenha todos os valores dos campos semelhantes aos valores de outro registro, com exceção do ID, então isso mostra que o ID não é adequado para chave primária da tabela.<br /><strong>Chave Primária</strong> - Formada por um campo ou mais que identifica todos os registros de uma tabela de forma única.<br /><strong>Chave Candidata</strong> - É a chave onde nenhum subconjunto de campos é também uma chave.<br /><strong>Superchave</strong> - É a chave formada por um conjunto de campos além do necessário para identificar todos os registros de forma única, ou seja, contém a chave primária mais um ou mais campos.<br /><strong>Chave alternativa</strong> - Quando uma tabela contém uma chave primária, qualquer outra chave será uma chave alternativa.<br /><strong>Projeto do Banco de Dados</strong> – Quando um atributo de uma entidade armazena valores duplicados, isso indica que devemos criar uma nova entidade para asmazenar os valores deste atributo e então relacionas as entidades através desse atributo.<br /><br />Obs.: CPF no Brasil não é uma boa escolha para chave primária em algumas entidades, pois membros de uma família podem utilizar o mesmo CPF.<br /><br /><br /><strong>Diagrama de Zelzowitz</strong><br /><br /><img src="../../../images/projeto1.jpeg" alt="" /><br /><br />Este é um diagrama usado para o desenvolvimento de software mas também podemos aplicá-lo ao projeto de bancos de dados.<br /><br /><strong>Análise</strong> – partindo do mundo real, define o problema e gera o modelo<br /><strong>Projeto</strong> – partindo do modelo gera o projeto do software (banco)<br /><strong>Implementação</strong> – partindo do projeto do software (banco) cria a aplicação.<br /><br />Partimos da situação real, que deve ser analisada gerando um modelo que será transformado em projeto e então se implementará no computador.<br /><br />Classes – objetos – atributos (propriedades e métodos)<br />Tabelas – registros – campos<br /><br /><strong>Uma boa estratégia é portar um conjunto de perguntas a serem respondidas:</strong><br /><br />1) Qual o principal objetivo do sistema?<br />2) Que dados são necessários para satisfazer este objetivo<br />3) Que informações já existem: algum sistema de computador anterior, fichas, formulários, etc.<br />4) Que entidades foram identificadas?<br />5) Quais as informações de cada entidade?<br />6) Qual o rascunho do modelo?<br />7) Que saídas são esperadas?<br /><br /><br />Ao final elaborar um primeiro diagrama de classes e vários casos de uso, que relatem no formato texto as interações do sistema.<br /><br />Anotar o que pode dar errado em cada faze do sistema.<br />História<br /><br />As três primeiras formas normais foram definidas por Ted Codd.<br /><br />O Modelo de Entidades e Relacionamentos foi introduzido por Peter Chen.<br /><br />O MR (Modelo Relacional) foi definido em 1970 por E. F. Codd.<br /><br /><strong>Modelo Relacional Normalizado</strong><br /><br />Cada tabela tem um nome distinto<br />Cada coluna tem um nome distinto<br />Não existem dois registros iguais<br />A ordem dos registros e dos campos é irrelevante<br /><br /><strong>SQL</strong> – É uma linguagem de declaração e não de programação e atualmente é a linguagem padrão dos SGBDRs e SGBDRO.<br /><br /><br /><strong>Referências:</strong><br /><br />Bancos de Dados – Aprenda o que são, Melhore seu conhecimento, Construa os seus<br />De Valdemar W. Seltzer e Flávio Soarea Corrêa da Silva<br />Beginning Database Design<br />De Clare Churcher<br />A Introduction to Database Systems<br />De C. J. Date<br /><br /><br /><strong>2) O Modelo Relacional</strong><br /><br /><strong> Todos os dados são representados como tabelas</strong><br />     Os resultados de qualquer consulta é apenas mais uma tabela!<br /> Tabelas são formadas por linhas e colunas<br /> Linhas e colunas são (oficialmente) desordenadas (isto é, a ordem com que as linhas e colunas são referenciadas não importa).<br />     Linhnas são ordenadas apenas sob solicitação. Caso contrário, a sua ordem é<br />    arbitrária e pode mudar para um banco de dados dinâmico<br />     A ordem das colunas é determinada por cada consulta<br /> Cada tabela possui uma chave primária, um identificador único constituído por uma ou mais colunas<br /> A maioria das chaves primárias é uma coluna apenas (por exemplo, TOWN_ID)<br /> Uma tabela é ligada (conectada) à outra incluindo-se a chave primária da outra tabela. Esta coluna incluída é chamada uma chave externa<br /> Chaves primárias e chaves externas são os conceitos mais importantes no projeto<br />de banco de dados. Gaste o tempo necessário para entender o que são!<br /><br /><br /><strong>Qualidades de um Bom Projeto de Banco de Dados</strong><br /> Reflete a estrutura real do problema<br /> Pode representar todo os dados esperados ao longo do tempo<br /> Evita armazenamento redundade de items de dados<br /> Fornece acesso eficiente aos dados<br /> Suporta a manutenção da integridade dos dados ao longo do tempo Limpa, consistente e fácil de entender<br /> Nota: Estes objetivos são algumas vêzes contraditórios!<br /><br /><strong>Introdução à Modelagem de Entidades - Relacionamento</strong><br /><br /> Modelagem E-R: Um método para projetar banco de dados<br /> Uma versão simplificada é apresentada aqui<br /> Representa o dado por entidades que possuem atributos.<br /> Uma entidade é uma classe de objetos ou conceitos identificáveis distintos<br /> Entidades possuem relações umas com as outras<br /> O resultado o processo é um banco de dados normalizado que facilita o acesso e evita dados duplicados<br /><br /><strong>Nota</strong>: Muito do projeto formal de banco de dados é focado em normalizar o banco de<br />dados e assegurar que o projeto adere ao nível de normalização (isto é, primeira forma<br />normal, segunda forma normal, etc.). Este nível de formalidade está além desta discussão,<br />mas deve-se saber que tais formalizações exitem.<br /><br /><br /><strong>Processo de Modelagem E-R</strong><br /> Identifique as entidades que o seu banco de dados deve representar<br /> Determine as relações de cardinalidade entre as entidades e classifique-as como<br />     Um-para-Um (por exemplo, um imóvel tem um endereço)<br />     Um-para-muitos (por exemplo, um imóvel pode ser envolvido em muitos incêndios)<br />     Muitos-para-muitosy (por exemplo, venda de imóveis: um imóvel pode ser vendido para muitos proprietários, e um proprietário individual pode vender muitos imóveis)<br /> Desenhe o diagrama entidade-relação<br /> Determine os atributos de cada entidade<br /> Defina a chave primária (única) de cada entidade<br /><br /><strong>Do modelo E-R para o Projeto de Banco de Dados</strong><br /> Entidades com relações um-para-um deve ser fundidas em uma única entidade<br /> Cada entidade restante é modelada por uma tabela com uma chave primária e atributos, alguns dos quais podem ser chaves externas<br /> Relações Um-para-muitos são modeladas por um atributo de chave externa na tabela<br />represntando a entidade do lado "muitos" da relação<br /> Relações Muitos-para-muitos entre duas entidades são modeladaspor uma terceira tabela que possui chaves externas que referem-se às entidades. Estas chaves externas devem ser incluidas na chave primária da tabela da relação, se apropriado<br /> Ferramentas disponíveis comercialmente podem autimatizar o processo de conversão de um modelo E-R para um esquema de banco de dados<br /><br /><strong>Fonte</strong>: <a href="http://www.universia.com.br/mit/11/11208/pdf/lecture5-2.pdf">http://www.universia.com.br/mit/11/11208/pdf/lecture5-2.pdf</a>  (de Thomas H. Grayson)</p>

<p style="text-align: justify;"><strong>3) Modelo Objeto Relacional</strong><br /><br />A maioria dos sistemas de gerência de bancos de dados (SGBD) utlizados hoje em dia são baseados no modelo relacional, definido por E.F. Codd. Devido a grande demanda de dados complexos que devem ser armazenados (textos, imagens, som, etc), está havendo uma grande migração para sistemas que suportam esses tipos de dados. Entre as opções de sistemas, estão os bancos de dados orientados a objetos e os objeto-relacionais. Os bancos de dados objeto-relacionais estão situados entre os relacionais e os orientados a objetos. Com este resumo, queremos mostrar algumas características do modelo objecto-relacional. <br /><br /><strong>Principais características do SGBD Objeto-Relacional</strong> <br />    Devido a falta de padronização do modelo objeto-relacional, cada fabricante definiu as características do seu SGBD. Analizaremos algumas das principais características dos SGBDs objeto-relacional e daremos uma ênfase no SGBD Oracle 8.x, devido a sua grande popularidade como ORDBMS.<br />    Uma das principais características é permitir que o usuário defina tipos adicionais de dados – especificando a estrutura e a forma de operá-lo – e use estes tipos no modelo relacional. Desta forma, os dados são armazenados em sua forma natural [SAPM 98].<br />    Além dos tipos base já existentes, é permitido ao usuário criar novos tipos e trabalhar com dados complexos como imagens, som e vídeo, por exemplo.<br /><br />         Em última análise, o tipo objeto-relacional está evoluindo mais do que o orientado a objeto, tornando-se cada vez mais um novo produto, que não pode ser comparado com o orientado a objeto, pois este já é um produto maduro [MS 97]. <br /><br /><strong>Fonte</strong>: <a href="http://paginas.terra.com.br/informatica/arruda/Downloads/Artigos/artigo04/index.htm">http://paginas.terra.com.br/informatica/arruda/Downloads/Artigos/artigo04/index.htm</a>  <br /><br /><br /><br /><strong>4) Normalização</strong><br /><br /><strong>Normalização de Tabelas</strong><br /><br />Normalizar bancos tem o objetivo de tornar o banco mais eficiente, reduzindo as redundâncias, evitando retrabalho em eventuais alterações do modelo.<br /><br />Uma regra muito importante advinda da normalização ao criar tabelas é atentar para que cada tabela contenha informações sobre um único assunto, de um único tipo.<br /><br />Geralmente a aplicação das três primeiras formas normais atende à maioria dos projetos e dificilmente precisamos recorrer à quarta e/ou quinta (somente quando estritamente necessário).<br /><br />Normalização total não é obrigatório mas fortemente recomendado.<br /><br /><strong>1a Forma Normal</strong><br />Uma entidade encontra-se nesta forma quando nenhum dos atributos se repete. <br /><br />Exemplo: evitar cadastrar um produto duas vezes. Quando houver repetição devemos criar uma outra entidade com os campos repetidos e relacionar as tabelas por esse campo. <br /><br />Exemplo:<br /><br />clientes<br />cod nome  uf<br />1 – joão – CE<br />2 – pedro – CE<br />3 – manoel – MA<br /><br />Solução: Criar uma tabela para o campo UF e relacionar ambas.<br /><br />estados<br />1 – CE<br />2 - MA<br /><br />clientes<br />1 – joão – 1<br />2 – pedro – 1<br />3 – manoel - 2<br /><br /><br />Outro Exemplo:<br />Alunos: matricula, nome, data_nasc, serie, pai, mae<br /><br />Se a escola tem vários filhos de um mesmo casal haverá repetição do nome dos pais. Estão para atender à primeira regra, criamos outra tabela com os nomes dos pais e a matrícula do aluno.<br /><br /><br /><strong>2ª Forma Normal</strong><br />Quando a chave primária é composta por mais de um campo. <br /><br />Todos os campos que não fazem parte da chave devem depender da chave (de todos os seus campos).<br /><br />Caso algum campo dependa somente de parte da chave, então devemos colocar este campo em outra tabela.<br /><br /><br />Exemplo:<br />TabelaAlunos<br /><br />Chave (matricula, codigo_curso)<br /><br />avaliacao    descricao_curso<br /><br />Neste caso o campo descricao_curso depende apenas do codigo_curso, ou seja, tendo o código do curso conseguimos sua descrição. Então esta tabela não está na 2ª Forma Normal.<br /><br />Solução:<br /><br />Dividir a tabela em duas (alunos e cursos) e incorporar à chave existente:<br /><br />TabelaAlunos<br />Chave (matricula, codigo_curso)<br /><br />avaliacao<br />TabelaCursos<br />codigo_curso<br />descricao_curso<br /><br /><strong>3ª Forma Normal</strong><br />Quando um campo não é dependente diretamente da chave primária ou de parte dela, mas de outro campo da tabela que não pertence à chave primária. Quando isso ocorre esta tabela não está na terceira forma normal e a solução é dividir a tabela.<br /><br />Um atributo comun não deve depender de outro atributo comun, mas somente da PK.<br /><br />Exemplo:<br />Campo tipo total, que depende de deus fatores: quantidade e preco. <br /><br />Solução:<br />Não devemos armazenar campos calculados na tabela, pois além de gerar inconsistência são desnecessários, já que podemos consegui-lo com uma operação.<br /><br /><br /><strong>4a.Forma Normal</strong><br />Uma tabela está na 4FN, se e somente se, estiver na 3FN e não existirem dependências multivaloradas.<br /><br />Exemplo: Dados sobre livros<br /><br />Relação não normalizada: Livros(nrol, (autor), título, (assunto), editora, cid_edit, ano_public)<br /><br />1FN:        Livros(nrol, autor, assunto, título, editora, cid_edit, ano_public)<br />2FN:        Livros(nrol,título, editora, cid-edit, ano_public)<br />                AutAssLiv(nrol, autor, assunto)<br />3FN:        Livros(nrol, título, editora, ano_public)<br />                Editoras(editora, cid-edit)<br />                  AutAssLiv(nrol, autor, assunto)<br /><br />    * Redundância para representar todas as informações<br />    * Evitar todas as combinações: representação não-uniforme (repete alguns elementos ou posições nulas)<br /><br /><strong>Passagem à 4FN:</strong><br /><br />    * Geração de novas tabelas, eliminando Dependências Multivaloradas<br />    * Análise de Dependências Multivaloradas entre atributos:<br />    * autor, assunto - Dependência multivalorada de nrol<br />5a. Forma Normal<br /><br />Está ligada à noção de dependência de junção Se uma relação é decomposta em várias relações e a reconstrução não é possível pela junção das outras relações, dizemos que existe uma dependência de junção. <br />Existem tabelas na 4FN que não podem ser divididas em duas relações sem que se altere os dados originais. <br />Exemplo: Seja as relações R1(CodEmp, CodPrj) e R2(CodEmp, Papel) a decomposição da relação ProjetoRecuro(CodEmp, CodPrj, Papel).<br /><br /><br /><strong>Dica:</strong><br />Em caso de dúvida, o modelo ideal é o menos engessado, mesmo que paguem o preço de alguma redundância.<br /><br />- Ao aplicar a 3a. FN ainda persistirem redundâncias, então divide-se a tabela em duas.<br /><br /><br /><strong>Exemplos de Relacionamentos tipo N para N</strong><br /><br />Autores – Músicas<br />Alunos – Disciplinas<br />Produtos – Fornecedores<br />Produtos – Pedidos<br /><br /><br /><strong>Fases na criação de um banco de dados (aplicativo):</strong><br /><br />Análise<br />Projeto<br />Implementação<br />Testes<br />Homologação<br />Administração<br /><br /><strong>Análise</strong><br /><br />Nesta fase "enfrentamos" o mundo real para analisar e diagnosticar o problema para então passar um esboço do modelo para a fase de projeto.<br /><br />Nessa fase procedemos ao levantamento, gerenciamento e validação de informações importantes para o modelo.<br /><br />Análise  é a fase que tem contato com o mundo real, coletando informações junto ao cliente (usuário). Depois da coleta realiza a modelagem das entidades e relacionamentos e das normalizações. Ao final deve gerar um diagrama das entidades e relacionamentos DER.<br /><br /><strong>Projeto</strong> - definição das tabelas, índices, chaves (PK e FK), relacionamentos, views, etc.<br /><br /><strong>Fases do Projeto do Banco de Dados:</strong><br />• Modelagem Conceitual<br />• Projeto Lógico<br /><br /><strong>Modelo Conceitual</strong> - Define apenas quais os dados que aparecerão no banco de dados, sem se importar com a implementação do banco. Para essa fase o que mais se utiliza é o DER (Diagrama Entidade-Relacionamento).<br /><br /><strong>Modelo Lógico</strong> - Define quais as tabelas e os campos que formarão as tabelas, como também os campos-chave, mas ainda não se preocupa com detalhes como o tipo de dados dos campos, tamanho, etc.<br /><br />Não devemos misturar as tarefas de cada uma das fases. <br /><br /><strong>Implementação</strong> - criação do banco de acordo com o projeto e também criação dos usuários, grupos e privilégios.<br /><br />Análise e projeto são fases lógicas e implementação é física.<br /><br /><br /><strong>Comparando Construção de bancos de dados com edifícios:</strong><br /><br /><strong>Análise</strong> - reconhecimento do terreno e elaboração de croquis (esboço da planta).<br /><br /><strong>Projeto</strong> - Elaboração das plantas de acordo com o esboço: planta baixa, de elevação, detalhes, de situação, etc.<br /><br /><br /><strong>Implementação</strong> - Construção do edifício.<br /><br /><strong>Administração</strong> - manutenção do edifício.<br /><br /><br /><strong>5) Integridade Referencial</strong><br /><br />Tradução livre do documentação "CBT Integrity Referential":<br />http://techdocs.postgresql.org/college/002_referentialintegrity/. <br /><br />Integridade Referencial (relacionamento) é onde uma informação em uma tabela se refere à informações em outra tabela e o banco de dados reforça a integridade.<br /><br />Tabela1 ------------&gt; Tabela2<br />Onde é Utilizado?<br /><br />Onde pelo menos em uma tabela precisa se referir para informações em outra tabela e ambas precisam ter seus dados sincronizados.<br /><br /><strong>Exemplo</strong>: uma tabela com uma lista de clientes e outra tabela com uma lista dos pedidos efetuados por eles.<br />Com integridade referencial devidamente implantada nestas tabelas, o banco irá garantir que você nunca irá cadastrar um pedido na tabela pedidos de um cliente que não exista na tabela clientes.<br />O banco pode ser instruído para automaticamente atualizar ou excluir entradas nas tabelas quando necessário.<br /><br /><strong>Primary Key (Chave Primária)</strong> - é o campo de uma tabela criado para que as outras tabelas relacionadas se refiram a ela por este campo. Impede mais de um registro com valores iguais. É a combinação interna de UNIQUE e NOT NULL.<br /><br />Qualquer campo em outra tabela do banco pode se referir ao campo chave primária, desde que tenham o mesmo tipo de dados e tamanho da chave primária.<br /><br />Exemplo:<br />clientes (codigo INTEGER, nome_cliente VARCHAR(60))<br /><br />codigo     nome_cliente<br />1     PostgreSQL inc.<br />2     RedHat inc.<br /><br />pedidos (relaciona-se à Clientes pelo campo cod_cliente)<br />cod_pedido cod_cliente descricao<br /><br />Caso tentemos cadastrar um pedido com cod_cliente 2 ele será aceito.<br />Mas caso tentemos cadastrar um pedido com cod_cliente 3 ele será recusado pelo banco.<br /><br /><br /><br /><strong>Criando uma Chave Primária</strong><br />Deve ser criada quando da criação da tabela, para garantir valores exclusivos no campo.<br /><br />CREATE TABLE clientes(cod_cliente BIGINT, nome_cliente VARCHAR(60)<br />PRIMARY KEY (cod_cliente));<br /><br /><br /><strong>Criando uma Chave Estrangeira (Foreign Keys)</strong><br />É o campo de uma tabela que se relaciona (associa) com o campo Primary Key de outra.<br />O campo pedidos.cod_cliente refere-se ao campo clientes.codigo, então pedidos.cod_cliente é uma chave estrangeira, que é o campo que liga esta tabela a uma outra.<br /><br /><br />CREATE TABLE pedidos(<br />cod_pedido BIGINT, <br />cod_cliente BIGINT REFERENCES clientes, <br />descricao VARCHAR(60)<br />); <br /><br /><br />Outro exemplo:<br />FOREIGN KEY (campoa, campob)<br />REFERENCES tabela1 (campoa, campob)<br />ON UPDATE CASCADE<br />ON DELETE CASCADE);<br /><br /><br /><strong>Cuidado com exclusão em cascata.</strong> Somente utilize com certeza do que faz.<br />Dica: Caso desejemos fazer o relacionamento com um campo que não seja a chave primária, devemos passar este campo entre parênteses após o nome da tabela e o mesmo deve obrigatoriamente ser UNIQUE.<br />...<br />cod_cliente BIGINT REFERENCES clientes(nomecampo), <br />...<br /><br /><strong>Parâmetros Opcionais:</strong> <br /><br />ON UPDATE parametro e ON DELETE parametro.<br /><br /><br /><strong>ON UPDATE paramentros:</strong><br /><br /><strong>NO ACTION (RESTRICT)</strong> - quando o campo chave primária está para ser atualizado a atualização é abortada caso um registro em uma tabela referenciada tenha um valor mais antigo. Este parâmetro é o default quando esta cláusula não recebe nenhum parâmetro.<br /><br />Exemplo: ERRO Ao tentar usar "UPDATE clientes SET codigo = 5 WHERE codigo = 2. Ele vai tentar atualizar o código para 5 mas como em pedidos existem registros do cliente 2 haverá o erro.<br /><br /><br /><strong>CASCADE (Em Cascata)</strong> - Quando o campo da chave primária é atualizado, registros na tabela referenciada são atualizados.<br /><br />Exemplo: Funciona: Ao tentar usar "UPDATE clientes SET codigo = 5 WHERE codigo = 2. Ele vai tentar atualizar o código para 5 e vai atualizar esta chave também na tabela pedidos.<br /><br /><strong>SET NULL</strong> (atribuir NULL) - Quando um registro na chave primária é atualizado, todos os campos dos registros referenciados a este são setados para NULL.<br /><br />Exemplo: UPDATE clientes SET codigo = 9 WHERE codigo = 5;<br />Na clientes o codigo vai para 5 e em pedidos, todos os campos cod_cliente com valor 5 serão setados para NULL.<br /><br /><strong>SET DEFAULT</strong> (assumir o Default) - Quando um registro na chave primária é atualizado, todos os campos nos registros relacionados são setados para seu valor DEFAULT.<br /><br />Exemplo: se o valor default do codigo de clientes é 999, então <br /><br />UPDATE clientes SET codigo = 10 WHERE codigo = 2. Após esta consulta o campo código com valor 2 em clientes vai para 999 e também todos os campos cod_cliente em pedidos.<br /><br />ON DELETE parametros:<br /><br /><strong>NO ACTION (RESTRICT)</strong> - Quando um campo de chave primária está para ser deletado, a exclusão será abortada caso o valor de um registro na tabela referenciada seja mais velho. Este parâmetro é o default quando esta cláusula não recebe nenhum parâmetro.<br /><br />Exemplo: ERRO em DELETE FROM clientes WHERE codigo = 2. Não funcionará caso o cod_cliente em pedidos contenha um valor mais antigo que codigo em clientes.<br /><br /><strong>CASCADE</strong> - Quando um registro com a chave primária é excluído, todos os registros relacionados com aquela chave são excluídos.<br /><br /><strong>SET NULL</strong> - Quando um registro com a chave primária é excluído, os respectivos campos na tabela relacionada são setados para NULL.<br /><br /><strong>SET DEFAULT</strong> - Quando um registro com a chave primária é excluído, os campos respectivos da tabela relacionada são setados para seu valor DEFAULT.<br /><br /><strong>Excluindo Tabelas Relacionadas</strong><br /><br />Para excluir tabelas relacionadas, antes devemos excluir a tabela com chave estrangeira.<br />Tudo isso está na documentação sobre CREATE TABLE:<br />http://www.postgresql.org/docs/8.0/interactive/sql-createtable.html<br /><br /><strong>ALTER TABLE</strong><br /><a href="http://www.postgresql.org/docs/8.0/interactive/sql-altertable.html">http://www.postgresql.org/docs/8.0/interactive/sql-altertable.html</a> <br /><br /><br /><strong>Chave Primária Composta (dois campos)</strong><br />CREATE TABLE tabela (<br />codigo INTEGER, <br />data DATE, <br />nome VARCHAR(40),<br />PRIMARY KEY (codigo, data)<br />);<br /><br /><br /><strong>Alguns Modelos de Sistemas</strong><br /><br /><strong>Sistema de Contas a Pagar e Receber</strong><br />(Entidades e Relacionamentos)<br /><br />Endereço<br />        Tipo de Logradouro<br />        Logradouro<br />        Bairro<br />        Município<br />        UF<br />        Telefone<br /><br />Pessoa<br />    Física<br />    Jurídica<br />    CPagar<br />        Pagamento<br />    CReceber<br />    Recebimento<br /><br /><strong>Sistema Acadêmico</strong><br /><br />Cadastro do curso<br />Cadastro de disciplina<br />Cadastro de aluno<br />Cadastro de professor<br /><br />Abrir turma<br />Matrícular aluno<br />Emitir diário<br />Lançar avaliação<br />Emitir histórico<br />Consultar avaliação<br />Alocar professor<br /> <br /><br /><strong>Sistema de Biblioteca</strong><br /><br />Atores            Entidades                    Atores<br /><br />bibliotecário        Cadastrar assunto<br />            Cadastrar autor<br />            Cadastrar departamento - RH<br />            Cadastrar funcionário - RH<br />            Cadastrar obra<br />            Cadastrar editora - Setor de compras            <br />            Cadastrar exemplar<br /><br />            Cadastrar fornecedor - Setor de compras<br />funcionário        Cadastrar usuário<br />            Cadastrar requisição - Setor de compras<br />            Cadastrar motivo de manutenção - Setor de manutenção<br />            Efetuar empréstimo<br />            Efetuar devolução<br />            Registrar manutenção - Setor de manutenção<br />            Registrar reserva<br />            Consultar obras - usuário<br />            Consultar movimentação de usuários<br /><br /><br /><br /><strong>Sistema Bancário</strong><br /><br />Atores                Entidades<br /><br />cliente            Abrir conta<br />                Movimentar Conta<br />                Solicitar talão de cheques<br />                Solicitar empréstimo<br />                Solicitar cartão de crédito<br />                Comprar com cartão de crédito<br />                Pagar fatura do cartão<br />                Contratar seguro<br /><br />gerante            Cadastrar bandeira do cartão de crédito<br />                Cadastrar débito automático<br />                Cadastrar tipos de seguro<br />                Cadastrar cliente<br />                Liberar empréstimo<br /><br />adm do banco    Cadastrar estabelecimento comercial<br />                Cadastrar convênio<br />                Cadastrar gerente<br />                Cadastrar agência<br /><br /><strong>Sistema Comercial</strong><br /><br />Fornecedor        Lote        Produto<br />                    Nota Fiscal Itens<br />                    Movimento estoque<br />                    Movimento estoque<br />Nota Fiscal<br />    Nota Fiscal Itens<br />    Cliente        <br /><br />Fonte destes modelos: Revista SQL Magazine 53<br /><br /><br /><br /><strong>Um bom artigo sobre projeto de software:</strong> <br />Programação (I) - Planejamento e Otimização, de Edvaldo Silva de Almeida Júnior  no Viva o Linux:<br /><a href="http://www.vivaolinux.com.br/artigos/verArtigo.php?codigo=8057">http://www.vivaolinux.com.br/artigos/verArtigo.php?codigo=8057</a>  <br /><br /><br /><strong>Tabelas são mais conceituais e menos físicas que arquivos.</strong><br /><br /><br /><strong>Simplificando:</strong> <br />- DDL e DCL é para o DBA<br />- DML é para o programador<br /><br /><br /><strong>SGBDs</strong><br /><br />SGBDR – SGBD Relacional - tabelas são formadas por linhas e colunas (bidimensional)<br />SGBDOR - Combina os modelos OO e Relacional<br />SGBDOO - Modelo OO puro<br /><br /><strong>Características de SGBDs:</strong><br /><br />- Controle de redundância<br />- Compartilhamento de dados<br />- Controle de acesso<br />- Esquematização (relacionamentos armazenados no banco)<br />- Backups<br /><br /><strong>Objetivo do SGBD</strong> - armazenar objetos de forma a tornar ágil e segura a manipulação das informações.<br /><br /><strong>MER</strong> - Modelo Entidades e Relacionamentos - é o modelo composto de entidades e relacionamentos<br /><br /><strong>DER</strong> - Diagrama Entidades e Relacionamentos - é o resultado da fase inicial do projeto (análise)<br /><br />Exemplos de Entidades:<br /><br />- Físicas ou jurídicas - pessoas, funcionários, clientes, vendedores, fornecedores, empresas, filiais<br />- Documentos - ordens de compra, ordens de serviço, pedidos, notas fiscais<br />- Tabelas - CEPs, UF, cargos, etc<br /><br />Tupla (termo para a fase de projeto)<br />Registro (termo para a fase de implementação)<br /><br /><br /><strong>Fase de Análise</strong><br /><br />Ao definir uma entidade pergunte:<br />- Há informação relevante sobre esta entidade para a empresa?<br /><br />Faça um diagrama da entidade com alguns atributos<br /><br />Relacionamentos<br /><br />A                B<br />1 ----------- N<br /><br />Perguntar se A tem 1 ou + B<br />Perguntar se B tem somente 1 A<br /><br />Relacionamentos N - N devem ser divididos em dois 1 para N:<br /><br />1 ---------- N     e     N ----------- 1<br /><br /><br />Referência: Livro Instant SQL Programming - Joe Celko</p> 	</div>

	
	
				
	
	
	
</article>

</body>
</html>
