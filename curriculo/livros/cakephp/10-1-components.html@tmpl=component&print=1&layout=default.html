<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="pt-br" lang="pt-br" dir="ltr">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <base href="" />
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta name="author" content="Ribamar FS" />
	<meta name="robots" content="noindex, nofollow" />
	<meta name="description" content="Servidores linux, Programação web (PHP, Joomla, CakePHP, Laravel), Programação Mobile (Phaser, PhoneGap, Monaca, Unity, etc) entre outros." />
	<meta name="generator" content="Joomla! - Open Source Content Management" />
	<title>10.1 - Components - RibaFS Portal</title>
	<link href="http://ribafs.org/portal/curriculo/livros/cakephp/10-1-components.html?tmpl=component&amp;print=1&amp;layout=default" rel="canonical" />
	<link href="../../../templates/shaper_helix3/images/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon" />
	<link href="../../../favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon" />
	<link href="http://backup/portal/media/plg_content_prismsyntaxhighlighter/css/prism-okaidia.css" rel="stylesheet" type="text/css" />
	<link href="http://backup/portal/media/plg_content_prismsyntaxhighlighter/css/prism-linenumbers.css" rel="stylesheet" type="text/css" />
	<script src="http://backup/portal/media/plg_content_prismsyntaxhighlighter/js/prism-tinymce.js" type="text/javascript"></script>
	<script src="../../../media/jui/js/jquery.min.js@d40d24664a167cb951f5efaf872c4327" type="text/javascript"></script>
	<script src="../../../media/jui/js/jquery-noconflict.js@d40d24664a167cb951f5efaf872c4327" type="text/javascript"></script>
	<script src="../../../media/jui/js/jquery-migrate.min.js@d40d24664a167cb951f5efaf872c4327" type="text/javascript"></script>
	<script src="http://backup/portal/media/system/js/caption.js?d40d24664a167cb951f5efaf872c4327" type="text/javascript"></script>
	<script type="text/javascript">
jQuery(window).on('load',  function() {
				new JCaption('img.caption');
			});
	</script>
	<meta property="og:url" content="http://backup/portal/curriculo/livros/cakephp/10-1-components.html" />
	<meta property="og:type" content="article" />
	<meta property="og:title" content="10.1 - Components" />
	<meta property="og:description" content="10.1 - Componentes Nunca desista porque encontrou um obstáculo! Os desafios são o tempero da vida! O que é um Component segundo a documentação do CakePHP:..." />

   	<link rel="stylesheet" href="../../../media/jui/css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="../../../templates/shaper_helix3/css/frontend-edit.css" type="text/css" />
    <link rel="stylesheet" href="../../../templates/shaper_helix3/css/template.css" type="text/css" />
</head>
<body class="contentpane">
	<div id="system-message-container">
	</div>

	

<article class="item item-page" itemscope itemtype="http://schema.org/Article">
	<meta itemprop="inLanguage" content="pt-BR" />
	
	

	<div class="entry-header">
		<span class="post-format"><i class="fa fa-thumb-tack"></i></span>
		
					<h2 itemprop="name">
									10.1 - Components							</h2>
												</div>

						<div id="pop-print" class="btn hidden-print">
				<a href="10-1-components.html#" onclick="window.print();return false;">			<span class="icon-print" aria-hidden="true"></span>
		Imprimir	</a>			</div>
				
	
	
				
	
			<div itemprop="articleBody">
		<h3>10.1 - Componentes</h3>
<p align="right"> </p>
<p align="right"><em><strong>Nunca desista porque encontrou um obstáculo! Os desafios são o tempero da vida!</strong></em></p>
<p> </p>
<p><a name="o-que-é-um-component-segundo-a-doc-do-cakephp"></a> <span style="font-family: Times New Roman, serif;"><b>O que é um Component segundo a documentação do CakePHP:</b></span></p>
<p align="justify"><span style="font-family: Times New Roman, serif;">Os componentes são pacotes de lógica que são compartilhados entre controllers. O CakePHP vem com um conjunto fantástico de componentes que você pode usar para ajudar em várias tarefas comuns. Você também pode criar seus próprios componentes. Se você copia e cola parte de código entre controllers, você deve considerar criar seu próprio Component para conter essa funcionalidade. A criação de Componentes no CakePHP mantém o código dos controllers mais limpos e permite que você reutilize código entre controllers diferentes.</span></p>
<p><span style="font-family: Times New Roman, serif;">Documentação: <a href="https://book.cakephp.org/3.0/en/controllers/components.html#components">https://book.cakephp.org/3.0/en/controllers/components.html#components</a></span></p>
<p style="margin-bottom: 0cm; line-height: 100%;">Os Components podem ser considerados como formas de criar pedaços reutilizáveis de código relacionado a controllers com uma característica específica ou conceito.</p>
<p style="margin-bottom: 0cm; line-height: 100%;">O CakePHP conta com vários componentes nativos:</p>
<p style="margin-bottom: 0cm;"><a href="https://book.cakephp.org/3.0/en/controllers/components/authentication.html">AuthComponent</a></p>
<p style="margin-bottom: 0cm;"><a href="https://book.cakephp.org/3.0/en/controllers/components/cookie.html">Cookie</a></p>
<p style="margin-bottom: 0cm;"><a href="https://book.cakephp.org/3.0/en/controllers/components/csrf.html">Cross Site Request Forgery</a></p>
<p style="margin-bottom: 0cm;"><a href="https://book.cakephp.org/3.0/en/controllers/components/flash.html">Flash</a></p>
<p style="margin-bottom: 0cm;"><a href="https://book.cakephp.org/3.0/en/controllers/components/security.html">Security</a></p>
<p style="margin-bottom: 0cm;"><a href="https://book.cakephp.org/3.0/en/controllers/components/pagination.html">Pagination</a></p>
<p><a href="https://book.cakephp.org/3.0/en/controllers/components/request-handling.html">Request Handling</a></p>
<p style="margin-bottom: 0cm; line-height: 100%;"> </p>
<p style="margin-bottom: 0cm; line-height: 100%;"><b>FlashComponent</b>, são usados nos controllers para criar mensagens flash para o <code class="western">$_SESSION</code>, para serem renderizadas em uma View usando <a href="https://book.cakephp.org/3.0/en/views/helpers/flash.html">FlashHelper</a>.</p>
<p style="margin-bottom: 0cm; line-height: 100%;">Criando uma mensagem flash:</p>
<p style="margin-bottom: 0cm; line-height: 100%;">// Uses src/Template/Element/Flash/success.ctp</p>
<p style="margin-bottom: 0cm; line-height: 100%;">$this-&gt;Flash-&gt;success('This was successful');</p>
<p style="margin-bottom: 0cm; line-height: 100%;"> </p>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;">Usamos os métodos </span><code class="western"><span style="font-family: Times New Roman, serif;">success()</span></code><span style="font-family: Times New Roman, serif;"> e </span><code class="western"><span style="font-family: Times New Roman, serif;">error()</span></code><span style="font-family: Times New Roman, serif;"> do </span><code class="western"><span style="font-family: Times New Roman, serif;">FlashComponent</span></code><span style="font-family: Times New Roman, serif;"> para definir uma mensagem que será armazenada numa variável de sessão. </span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"><b>Mensagem em texto plano</b></p>
<p style="margin-bottom: 0cm; line-height: 100%;">Também podemos criar uma mensagem em texto plano no controller através do método set que será recebida na view respectiva com:</p>
<p style="margin-bottom: 0cm; line-height: 100%;">$this-&gt;Flash-&gt;set('Isto é uma mensagem somente texto');</p>
<p style="margin-bottom: 0cm; line-height: 100%;"><a name="criando-um-component"></a> <span style="font-family: Times New Roman, serif;"><b>Criando um Component</b></span></p>
<p><span style="font-family: Times New Roman, serif;">Para nosso exemplo, vamos criar um Component para criação de senhas com caracteres aleatórios. Para isso precisamos criar uma classe no diretório </span></p>
<p align="justify"><code class="western"><span style="font-family: Times New Roman, serif;">src/Controller/Component/</span></code><span style="font-family: Times New Roman, serif;">, um nome de component seguindo a convenção do cake seria algo como: </span><code class="western"><span style="font-family: Times New Roman, serif;">MinhaClasseComponent.php</span></code><span style="font-family: Times New Roman, serif;"> que extende da classe </span><code class="western"><span style="font-family: Times New Roman, serif;">Component</span></code><span style="font-family: Times New Roman, serif;">. Como umas das filosofias do nosso Framework favorito é facilitar o trabalho, podemos usar o PHP CLI(command line inteface) ou vulgarmente conhecido como Bake.</span></p>
<p><span style="font-family: Times New Roman, serif;">Para executar o console do cake, precisamos simplesmente executar o código abaixo.</span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"> </p>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;"><b>Carregar componentes</b></span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;">No método initialize() de um controller</span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;"><span style="font-size: medium;"><i>$this-&gt;loadComponent('Flash');</i></span></span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;"><span style="font-size: medium;"><i>$this -&gt;loadComponent('Auth');</i></span></span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"> </p>
<p><span style="font-family: Times New Roman, serif;"><span style="font-size: medium;"><b>Criação de um Componente</b></span></span></p>
<p><span style="font-family: Times New Roman, serif;"><span style="font-size: medium;">Criar o arquivo</span></span></p>
<pre class="language-php"><code>src/Controller/Component/CalcularComponent.php, contendo:

&lt;?php
namespace App\Controller\Component;

use Cake\Controller\Component;

class CalcularComponent extends Component
{
    public function soma($valor1, $valor2)
    {
        $s =$valor1 + $valor2;
		return $s;
    }
}</code></pre>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;">Adicionar uma chamada no método initialize() do src/Controller/AppController</span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"> </p>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;"><b>Executar num action</b>, como o src/Controller/ClientesController.php</span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;"><span style="font-size: medium;"><i>public function index()</i></span></span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;"><span style="font-size: medium;"><i>{</i></span></span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;"><span style="font-size: medium;"><i> print 'Componente Soma: '.$this-&gt;Calcular-&gt;soma(2,3);</i></span></span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"> </p>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;">Estando no AppController ele será visto por todos os demais controllers e seus métodos estarão disponíveis logo que cada controller seja executado.</span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;">Caso queira que apenas um controller tenha acesso ao mesmo, insira o método initialize() no início deste controller assim :</span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;"><span style="font-size: medium;"><i>public function initialize()</i></span></span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;"><span style="font-size: medium;"><i>{</i></span></span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;"><span style="font-size: medium;"><i>parent::initialize();</i></span></span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;"><span style="font-size: medium;"><i> $this-&gt;loadComponent('Calcular');</i></span></span></p>
<p><span style="font-family: Times New Roman, serif;"><span style="font-size: medium;"><i>}</i></span></span></p>
<p><span style="font-family: Times New Roman, serif;"><span style="font-size: medium;"><b>Exemplos de Componentes Simples</b></span></span></p>
<pre class="language-php"><code>&lt;?php
/**
 * Component Calculo
 * For CakePHP 3.x
 * Autor: Ribamar FS
 *
 * This component allow access control to each action from application with web interface.
 *
 * Licenced with The MIT License
 * Redistributions require keep copyright below.
 *
 * @copyright     Copyright (c) Ribamar FS (http://ribafs.org)
 * @link          http://ribafs.org
 * @license       http://www.opensource.org/licenses/mit-license.php MIT License
 */

namespace App\Controller\Component;
use Cake\Controller\Component;

class CalculoComponent extends Component{

	private $um;
	private $dois;

	public function soma($um,$dois){
		return ($um + $dois);
	}

	public function subtracao($um,$dois){
		return ($um - $dois);
	}
	
	public function multiplicacao($um,$dois){
		return ($um * $dois);
	}	

	public function divisao($um,$dois){
		return ($um / $dois);
	}
	
}
</code></pre>
<p style="margin-bottom: 0cm; line-height: 100%; page-break-before: always;"><span style="font-family: Times New Roman, serif;"><b>Exemplos Práticos com o CakePHP 3</b></span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;"><a href="https://www.tutorialspoint.com/cakephp/index.htm">https://www.tutorialspoint.com/cakephp/index.htm</a> </span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"> </p>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;"><span style="font-size: medium;"><b>Bom exemplo de criação de plugin</b></span></span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;"><span style="font-size: medium;"><a href="https://www.cakephpbrasil.com.br/tutorial/2017/03/07/criando-components-no-cakephp-3/">https://www.cakephpbrasil.com.br/tutorial/2017/03/07/criando-components-no-cakephp-3/</a> </span></span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"> </p>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;"><span style="font-size: medium;"><b>Padrões para a criação de um bom plugin para o CakePHP 3</b></span></span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;"><span style="font-size: medium;"><a href="https://www.cakedc.com/plugin-standard">https://www.cakedc.com/plugin-standard</a></span></span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"> </p>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;"><span style="font-size: medium;"><b>Mais detalhes</b></span></span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"><span style="font-family: Times New Roman, serif;"><span style="font-size: medium;"><a href="https://book.cakephp.org/3.0/en/controllers/components.html">https://book.cakephp.org/3.0/en/controllers/components.html</a></span></span></p>
<p style="margin-bottom: 0cm; line-height: 100%;"> </p> 	</div>

	
	
				
	
	
	
</article>

</body>
</html>
